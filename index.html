<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Instagram - Pr√©sentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Styles inchang√©s, garde ton code CSS actuel */
        :root {
            --primary: #0095f6;
            --secondary: #8e8e8e;
            --border: #dbdbdb;
            --background: #fafafa;
            --text: #262626;
            --white: #ffffff;
            --story-gradient: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
            --red-heart: #ed4956;
        }
        * {margin:0;padding:0;box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;}
        body {background-color: var(--background); color: var(--text);}
        /* ... Ton CSS actuel reste ici ... */
    </style>
</head>
<body>
    <header class="presentation-header">
        <h1>Mini Instagram</h1>
        <p>Pr√©sentation de mon projet de r√©seau social inspir√© d'Instagram</p>
    </header>

    <nav class="presentation-nav">
        <a href="#demo" class="active">D√©monstration</a>
        <a href="#publish">Publier une photo</a>
        <a href="#features">Fonctionnalit√©s</a>
        <a href="#tech">Technologies</a>
    </nav>

    <div class="container">
        <!-- Section de publication -->
        <section id="publish" class="publish-section">
            <h3>üì∏ Publier une nouvelle photo</h3>
            <div id="message" class="message" style="display: none;"></div>
            
            <div class="form-group">
                <label for="photoUrl">URL de la photo :</label>
                <input type="url" id="photoUrl" placeholder="https://exemple.com/photo.jpg">
            </div>
            
            <div class="form-group">
                <label for="caption">L√©gende :</label>
                <textarea id="caption" placeholder="Partagez votre moment... #insta #photo"></textarea>
            </div>
            
            <button class="publish-btn" id="publishBtn">
                <i class="fas fa-paper-plane"></i> Publier
            </button>
        </section>

        <!-- Section de d√©monstration -->
        <section id="demo">
            <h2>D√©monstration interactive</h2>
            <div class="instagram-demo">
                <div class="navbar">
                    <a href="#" class="logo">MiniInstagram</a>
                    <input type="text" class="search-bar" placeholder="Rechercher">
                    <div class="nav-icons">
                        <i class="fas fa-home"></i>
                        <i class="far fa-paper-plane" id="shareDemoBtn"></i>
                        <i class="far fa-compass"></i>
                        <i class="far fa-heart"></i>
                        <i class="far fa-user"></i>
                    </div>
                </div>
                
                <div class="stories-container">
                    <div class="stories" id="storiesContainer"></div>
                </div>
                
                <div id="postsContainer"></div>
            </div>
        </section>
        
        <section id="features">
            <h2>Fonctionnalit√©s</h2>
            <ul>
                <li>Interface utilisateur moderne</li>
                <li>Syst√®me de likes interactif</li>
                <li>Partage de posts</li>
                <li>Ajout de commentaires</li>
                <li>Publication de nouvelles photos</li>
                <li>Stories avec avatars</li>
                <li>Design responsive</li>
            </ul>
        </section>
        
        <section id="tech">
            <h2>Technologies utilis√©es</h2>
            <p>HTML5, CSS3, JavaScript</p>
        </section>
    </div>

    <footer class="presentation-footer">
        <p>Projet Mini Instagram - Pr√©sentation de projet √©tudiant</p>
    </footer>

    <script>
        // üåü D√©finir ton ALB comme back-end
        const API_BASE_URL = "http://Project-ALB-371399116.us-east-1.elb.amazonaws.com";

        let posts = [];
        const stories = [
            { username: "vous", img: "https://api.dicebear.com/7.x/avataaars/svg?seed=vous" },
            { username: "lucas", img: "https://api.dicebear.com/7.x/avataaars/svg?seed=lucas" },
            { username: "marie", img: "https://api.dicebear.com/7.x/avataaars/svg?seed=marie" }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            renderStories();
            fetchPostsFromBackend();
            setupPublishForm();
        });

        function renderStories() {
            const container = document.getElementById('storiesContainer');
            container.innerHTML = stories.map(s => `
                <div class="story">
                    <div class="story-img"><img src="${s.img}" alt="${s.username}"></div>
                    <div class="story-username">${s.username}</div>
                </div>
            `).join('');
        }

        function renderPosts() {
            const container = document.getElementById('postsContainer');
            container.innerHTML = posts.map(p => `
                <div class="post" data-id="${p.id}">
                    <div class="post-header">
                        <img src="${p.userImg}" class="post-user-img" alt="${p.username}">
                        <div class="post-username">${p.username}</div>
                    </div>
                    <img src="${p.image}" class="post-image" alt="Post de ${p.username}">
                    <div class="post-likes">${p.likes} j'aime</div>
                    <div class="post-caption"><span>${p.username}</span> ${p.caption}</div>
                </div>
            `).join('');
        }

        // üîπ R√©cup√©rer les posts depuis le back-end
        function fetchPostsFromBackend() {
            fetch(`${API_BASE_URL}/api/posts`)
                .then(res => res.json())
                .then(data => {
                    posts = data.posts || [];
                    renderPosts();
                })
                .catch(err => console.error("Erreur r√©cup√©ration posts :", err));
        }

        // üîπ Publier un post vers le back-end
        function setupPublishForm() {
            const publishBtn = document.getElementById('publishBtn');
            const photoUrlInput = document.getElementById('photoUrl');
            const captionInput = document.getElementById('caption');
            const messageDiv = document.getElementById('message');

            publishBtn.addEventListener('click', function() {
                const photoUrl = photoUrlInput.value.trim();
                const caption = captionInput.value.trim();

                if (!photoUrl || !caption) {
                    showMessage("Veuillez remplir tous les champs", "error");
                    return;
                }

                fetch(`${API_BASE_URL}/api/posts`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ image: photoUrl, caption: caption })
                })
                .then(res => res.json())
                .then(data => {
                    if(data.success){
                        showMessage("Photo publi√©e avec succ√®s !", "success");
                        photoUrlInput.value = "";
                        captionInput.value = "";
                        fetchPostsFromBackend();
                    } else {
                        showMessage("Erreur lors de la publication", "error");
                    }
                })
                .catch(err => {
                    console.error(err);
                    showMessage("Erreur r√©seau : impossible de contacter le serveur", "error");
                });
            });
        }

        function showMessage(text, type) {
            const messageDiv = document.getElementById('message');
            messageDiv.textContent = text;
            messageDiv.className = `message ${type}`;
            messageDiv.style.display = 'block';
            setTimeout(() => { messageDiv.style.display = 'none'; }, 3000);
        }
    </script>
</body>
</html>
